#!/bin/bash
cd "${0%/*}" || exit                                # Run from this directory
. ${WM_PROJECT_DIR:?}/bin/tools/RunFunctions        # Tutorial run functions
#------------------------------------------------------------------------------

export caseName=`basename $PWD`

# We stop this script when we encounter a problem
trap "exit -1" ERR

if [ -d 0 ]; then
    echo "$caseName: Time directory 0 exists and will be used for a restart."
else
    echo "$caseName: ERROR No time directory 0 found."
    echo "  fixedTol case should be run as a restart in order to get reasonable statistics."
    echo "  Download restart files as described in README."
    echo "  If a run from non-initialized fields is desired copy 0_orig to 0 manually."
    echo "  Aborting."
    exit 1
fi

if [ ! -d "constant/polyMesh" ]; then
    echo "$caseName: ERROR No directory constant/polyMesh found."
    echo "  Please download and unpack the mesh."
    echo "  See README for further details."
    echo "  Aborting."
    exit 1
fi

runApplication decomposePar
