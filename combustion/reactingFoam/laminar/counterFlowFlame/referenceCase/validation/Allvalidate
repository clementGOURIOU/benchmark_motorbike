#!/bin/sh

# Require gnuplot
command -v gnuplot >/dev/null || {
    echo "FOAM FATAL ERROR: gnuplot not found - skipping graph creation" 1>&2
    exit 1
}

pPFolder="../postProcessing/axialLines/0.5/line_CH4_CO2_H2O_O2_Qdot_T_p_U.xy"

#- reactants
gnuplot<<EOF
    set terminal postscript eps color enhanced "Helvetica,20"
    set output "hybridGPU_vs_CPU_reactants.eps"
    set xlabel "Position [m]" font "Helvetica,24"
    set ylabel "Mass fraction [-]" font "Helvetica,24"
    set key right top font "Helvetica,17"
    set xrange [0:0.02]
    plot \
        "REF/line_CH4_CO2_H2O_O2_Qdot_T_p.xy" u 1:2 t "CH4 (Reference)" with points lt 1 pt 6 ps 1.5,\
        "$pPFolder" u 1:2 with lines title "CH4 (Current sim.)" lt 1,\
        "REF/line_CH4_CO2_H2O_O2_Qdot_T_p.xy" u 1:5 t "O2 (Reference)" with points lt 2 pt 6 ps 1.5,\
        "$pPFolder" u 1:5 with lines title "O2 (Current sim.)" lt 2


EOF


#- combustion products
gnuplot<<EOF
    set terminal postscript eps color enhanced "Helvetica,20"
    set output "hybridGPU_vs_CPU_products.eps"
    set xlabel "Position [m]" font "Helvetica,24"
    set ylabel "Mass fraction [-]" font "Helvetica,24"
    set key left top font "Helvetica,17"
    set xrange [0:0.02]
    plot \
        "REF/line_CH4_CO2_H2O_O2_Qdot_T_p.xy" u 1:3 t "CO2 (Reference)" with points lt 1 pt 6 ps 1.5,\
        "$pPFolder" u 1:3 with lines title "CO2 (Current sim.)" lt 1,\
        "REF/line_CH4_CO2_H2O_O2_Qdot_T_p.xy" u 1:4 t "H2O (Reference)" with points lt 2 pt 6 ps 1.5,\
        "$pPFolder" u 1:4 with lines title "H2O (Current sim.)" lt 2


EOF

#- temperature peak
gnuplot<<EOF
    set terminal postscript eps color enhanced "Helvetica,20"
    set output "hybridGPU_vs_CPU_T.eps"
    set xlabel "Position [m]" font "Helvetica,24"
    set ylabel "Temperature [K]" font "Helvetica,24"
    set key right top font "Helvetica,17"
    set xrange [0:0.02]
    plot \
        "REF/line_CH4_CO2_H2O_O2_Qdot_T_p.xy" u 1:7 t "Reference" with points lt -1 pt 6 ps 1.5,\
        "$pPFolder" u 1:7 with lines title "Current simulation" lt -1

EOF


#- temperature peak
gnuplot<<EOF
    set terminal postscript eps color enhanced "Helvetica,20"
    set output "hybridGPU_vs_CPU_Qdot.eps"
    set xlabel "Position [m]" font "Helvetica,24"
    set ylabel "Qdot [W/s]" font "Helvetica,24"
    set key left top font "Helvetica,17"
    set xrange [0:0.02]
    plot \
        "REF/line_CH4_CO2_H2O_O2_Qdot_T_p.xy" u 1:6 t "Reference" with points lt -1 pt 6 ps 1.5,\
        "$pPFolder" u 1:6 with lines title "Current simulation" lt -1

EOF

#------------------------------------------------------------------------------
